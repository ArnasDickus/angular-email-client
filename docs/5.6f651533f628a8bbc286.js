(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{P9on:function(r,t,e){"use strict";e.r(t),e.d(t,"AuthenticationModule",(function(){return S}));var n=e("ofXK"),o=e("tyNb"),i=e("3Pt+"),s=e("8izQ"),a=e("fXoL"),c=e("RL7/"),u=e("QlUG");function b(r,t){1&r&&(a.Qb(0,"p",9),a.Bc(1," Invalid username or password "),a.Pb())}function l(r,t){1&r&&(a.Qb(0,"p",9),a.Bc(1," No internet connection detected, failed to sign up. "),a.Pb())}function m(r,t){if(1&r&&(a.Qb(0,"div",7),a.zc(1,b,2,0,"p",8),a.zc(2,l,2,0,"p",8),a.Pb()),2&r){const r=a.dc();a.xb(1),a.ic("ngIf",r.form.errors.credentials),a.xb(1),a.ic("ngIf",r.form.errors.unknownError)}}let d=(()=>{class r{constructor(r,t,e){this.formBuilder=r,this.authService=t,this.router=e}ngOnInit(){this.buildForm()}onSubmit(){this.form.invalid||this.authService.login(this.form.value).subscribe({next:()=>{this.router.navigateByUrl("/"+s.a.INBOX)},error:({error:r})=>{this.form.setErrors(r.username||r.password?{credentials:!0}:{unknownError:!0})}})}buildForm(){this.form=this.formBuilder.group({username:["",[i.l.required,i.l.minLength(3),i.l.maxLength(20),i.l.pattern(/^[a-z0-9]+$/)]],password:["",[i.l.required,i.l.minLength(4),i.l.maxLength(20)]]})}}return r.\u0275fac=function(t){return new(t||r)(a.Kb(i.b),a.Kb(c.a),a.Kb(o.b))},r.\u0275cmp=a.Eb({type:r,selectors:[["app-login"]],decls:9,vars:7,consts:[[1,"container","mt-4","mb-4"],[1,"home__title"],[3,"formGroup","ngSubmit"],["label","Username","type","text","id","usernameLoginInput",3,"control","required"],["label","Password","type","password","id","passwordLoginInput",3,"control","required"],["class","alert alert-warning",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-warning"],["class","mt-2",4,"ngIf"],[1,"mt-2"]],template:function(r,t){1&r&&(a.Qb(0,"div",0),a.Qb(1,"h3",1),a.Bc(2,"Login"),a.Pb(),a.Qb(3,"form",2),a.bc("ngSubmit",(function(){return t.onSubmit()})),a.Lb(4,"app-input",3),a.Lb(5,"app-input",4),a.zc(6,m,3,2,"div",5),a.Qb(7,"button",6),a.Bc(8,"Submit"),a.Pb(),a.Pb(),a.Pb()),2&r&&(a.xb(3),a.ic("formGroup",t.form),a.xb(1),a.ic("control",t.form.get("username"))("required",!1),a.xb(1),a.ic("control",t.form.get("password"))("required",!1),a.xb(1),a.ic("ngIf",t.form.errors),a.xb(1),a.ic("disabled",!t.form.valid))},directives:[i.n,i.i,i.d,u.a,n.l],styles:[""]}),r})(),p=(()=>{class r{validate(r){const{password:t,passwordConfirmation:e}=r.value;return t===e?null:{passwordsDontMatch:!0}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=a.Gb({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var f=e("yrbL"),h=e("LRne");let g=(()=>{class r{constructor(r){this.authService=r,this.url="https://api.angular-email.com",this.validate=r=>{const{value:t}=r;return this.authService.usernameAvailable(t).pipe(Object(f.map)(r=>{if(r.available)return null}),Object(f.catchError)(r=>r.error.username?Object(h.a)({nonUniqueUsername:!0}):Object(h.a)({noConnection:!0})))}}}return r.\u0275fac=function(t){return new(t||r)(a.Yb(c.a))},r.\u0275prov=a.Gb({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function w(r,t){1&r&&(a.Qb(0,"p",10),a.Bc(1," Password and Password confirmation does not match "),a.Pb())}function v(r,t){1&r&&(a.Qb(0,"p",10),a.Bc(1," No internet connection detected, failed to sign up. "),a.Pb())}function I(r,t){1&r&&(a.Qb(0,"p",10),a.Bc(1," Failed to sign up. "),a.Pb())}function y(r,t){if(1&r&&(a.Qb(0,"div",8),a.zc(1,w,2,0,"p",9),a.zc(2,v,2,0,"p",9),a.zc(3,I,2,0,"p",9),a.Pb()),2&r){const r=a.dc();a.xb(1),a.ic("ngIf",r.form.errors.passwordsDontMatch),a.xb(1),a.ic("ngIf",r.form.errors.noConnection),a.xb(1),a.ic("ngIf",r.form.errors.unknownError)}}const P=[{path:s.a.REGISTER,component:(()=>{class r{constructor(r,t,e,n,o){this.formBuilder=r,this.matchPassword=t,this.uniqueUsername=e,this.authService=n,this.router=o}ngOnInit(){this.buildForm()}onSubmit(){this.form.invalid||this.authService.register(this.form.value).subscribe({next:r=>{this.router.navigateByUrl("/"+s.a.INBOX)},error:r=>{this.form.setErrors(r.status?{unknownError:!0}:{noConnection:!0})}})}buildForm(){this.form=this.formBuilder.group({username:["",[i.l.required,i.l.minLength(3),i.l.maxLength(20),i.l.pattern(/^[a-z0-9]+$/)],[this.uniqueUsername.validate]],password:["",[i.l.required,i.l.minLength(4),i.l.maxLength(20)]],passwordConfirmation:["",[i.l.required,i.l.minLength(4),i.l.maxLength(20)]]},{validators:[this.matchPassword.validate]})}}return r.\u0275fac=function(t){return new(t||r)(a.Kb(i.b),a.Kb(p),a.Kb(g),a.Kb(c.a),a.Kb(o.b))},r.\u0275cmp=a.Eb({type:r,selectors:[["app-register"]],decls:10,vars:9,consts:[[1,"container","mt-4","mb-4"],[1,"home__title"],[3,"formGroup","ngSubmit"],["label","Username","type","text","id","usernameInput",3,"control","required"],["label","Password","type","password","id","passwordInput",3,"control","required"],["label","Password Confirmation","type","password","id","confirmPasswordInput",3,"control","required"],["class","alert alert-warning",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-warning"],["class","mt-2",4,"ngIf"],[1,"mt-2"]],template:function(r,t){1&r&&(a.Qb(0,"div",0),a.Qb(1,"h3",1),a.Bc(2,"Create an Account"),a.Pb(),a.Qb(3,"form",2),a.bc("ngSubmit",(function(){return t.onSubmit()})),a.Lb(4,"app-input",3),a.Lb(5,"app-input",4),a.Lb(6,"app-input",5),a.zc(7,y,4,3,"div",6),a.Qb(8,"button",7),a.Bc(9,"Submit"),a.Pb(),a.Pb(),a.Pb()),2&r&&(a.xb(3),a.ic("formGroup",t.form),a.xb(1),a.ic("control",t.form.get("username"))("required",!0),a.xb(1),a.ic("control",t.form.get("password"))("required",!0),a.xb(1),a.ic("control",t.form.get("passwordConfirmation"))("required",!0),a.xb(1),a.ic("ngIf",t.form.get("password").touched&&t.form.get("passwordConfirmation").touched&&t.form.errors),a.xb(1),a.ic("disabled",!t.form.valid))},directives:[i.n,i.i,i.d,u.a,n.l],styles:[""]}),r})()},{path:s.a.LOGIN,component:d},{path:s.a.LOGOUT,component:(()=>{class r{constructor(r,t){this.authService=r,this.router=t}ngOnInit(){this.authService.signOut().subscribe(()=>{setTimeout(()=>{this.router.navigateByUrl("/")},100)})}}return r.\u0275fac=function(t){return new(t||r)(a.Kb(c.a),a.Kb(o.b))},r.\u0275cmp=a.Eb({type:r,selectors:[["app-logout"]],decls:0,vars:0,template:function(r,t){},styles:[""]}),r})()}];let x=(()=>{class r{}return r.\u0275mod=a.Ib({type:r}),r.\u0275inj=a.Hb({factory:function(t){return new(t||r)},imports:[[o.e.forChild(P)],o.e]}),r})();var L=e("PCNd");let S=(()=>{class r{}return r.\u0275mod=a.Ib({type:r}),r.\u0275inj=a.Hb({factory:function(t){return new(t||r)},imports:[[n.c,x,i.k,L.a]]}),r})()}}]);